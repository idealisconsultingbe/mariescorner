<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_mrp_saleslot_document">
        <div class="page" style="font-size:1.4rem;">
            <t t-set="doc" t-value="doc.with_context(lang=doc.sales_lot_id.partner_id.lang)"/>
            <hr width="100%" class="m-0" style="border-bottom: 1px solid black;"/>

            <div name="label_1" style="page-break-inside:avoid;">
                <strong class="m-0" t-field="doc.name"/>
                <div class="row mt32 mb32" id="main_row">
                    <div class="col-6" name="main_info">
                        <h1 class="font-weight-bold" style="font-size:1.6rem;">Manufacturing Number: <span t-field="doc.sales_lot_id.name"/></h1>
                        <h2 class="font-weight-bold" style="font-size:1.4rem;">Order <small>(Source Document)</small>: <span t-field="doc.sales_lot_id.origin_sale_order_id.name"/></h2>
                        <div class="p-2 mw-100" name="destination" style="border: 2px solid black;">
                            <div><strong>Destination:</strong> <span t-field="doc.sales_lot_id.carrier_id.name"/></div>
                            <div><strong>Country:</strong> <span t-field="doc.sales_lot_id.partner_id.country_id.name"/></div>
                        </div>
                    </div>
                    <div class="col-6" name="secondary_info">
                        <div name="barcode" class="text-center align-middle">
                            <img alt="Barcode" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', quote_plus(doc.sales_lot_id.name or ''), 400, 50)" style="width:100%;"/>
                            <span t-field="doc.sales_lot_id.name" style="font-size:8pt;"/>
                        </div>
                        <div name="customer">
                            <strong>Customer:</strong> <span t-if="doc.sales_lot_id.partner_id.ref">[<t t-esc="doc.sales_lot_id.partner_id.ref"/>]</span> <span t-field="doc.sales_lot_id.partner_id.name"/>
                        </div>
                    </div>
                </div>
            </div>

            <hr width="100%" class="m-0" style="border-bottom: 1px solid black;"/>

        </div>
    </template>

    <template id="report_mrp_saleslot">
        <t t-call="web.basic_layout">
            <t t-set="docs" t-value="docs.sudo()"/>
            <t t-foreach="docs" t-as="doc">
                <t t-call="mc_sales_lot.report_mrp_saleslot_document" t-lang="doc.env.lang"/>
                <div style="page-break-after: always;"/>
            </t>
        </t>
    </template>

    <template id="report_mrp_saleslot_labels_document">
        <style>
            ul.no-marker-style {
            list-style-type: none;
            margin: 0;
            padding: 0;
            }
        </style>
        <div class="page">
            <t t-set="doc" t-value="doc.with_context(lang=doc.sales_lot_id.partner_id.lang)" />
            <t t-set="current_label_index" t-value="1"/>
            <t t-set="max_label_index" t-value="len(serial_numbers[doc.sales_lot_id.id])"/>

            <t t-foreach="serial_numbers[doc.sales_lot_id.id]" t-as="serial_number">
                <div name="label_1" style="border:2px solid black; page-break-inside: avoid;">
                    <div class="row" style="min-height:310px">
                        <div class="col-6" name="part_left">
                            <div name="order" class="p-1">
                                <ul class="no-marker-style">
                                    <li><span class="h4 font-weight-bold" t-field="doc.sales_lot_id.origin_sale_order_id.name"/><span t-if="doc.sales_lot_id.origin_sale_order_id"> - </span><span class="h4 font-weight-bold" t-field="doc.sales_lot_id.name"/></li>
                                    <li><strong>PACK: </strong><span class="font-weight-bold" t-esc="current_label_index"/> <span> / </span> <span class="font-weight-bold" t-esc="max_label_index"/></li>
                                    <li><strong>Destination: </strong><span class="font-weight-bold" t-field="doc.sales_lot_id.carrier_id.name"/></li>
                                </ul>
                            </div>

                            <div name="product" class="ml-1 mb-1 p-1" style="border:1px solid black;min-height:183px;">
                                <div class="row">
                                    <div class="col-4 text-center align-middle" name="image">
                                        <span class="i-block-100" t-if="doc.product_id.image_128" t-field="doc.product_id.image_128" t-att-title="doc.product_id.name" role="img" t-att-aria-label="doc.product_id.name" t-options="{'widget': 'image', 'style':'max-width: 60px; display: inline-block'}"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-6" name="part_right">
                            <div class="text-center align-middle px-1 pt-1" name="barcode">
                                <img alt="Barcode" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', quote_plus(serial_number or ''), 400, 50)" style="width:100%;"/>
                                <span t-esc="serial_number" style="font-size:8pt;"/>
                            </div>
                            <div name="customer" class="pb-1 px-1">
                                <ul class="no-marker-style" style="font-size:11pt;">
                                    <li><strong>ID CUST: </strong><span class="font-weight-bold" t-field="doc.sales_lot_id.partner_id.ref"/></li>
                                    <li t-if="doc.sales_lot_id.origin_sale_order_line_id and doc.sales_lot_id.origin_sale_order_line_id.order_id.client_order_ref"><strong>REF CUST: </strong><span class="font-weight-bold" t-field="doc.sales_lot_id.origin_sale_order_line_id.order_id.client_order_ref"/></li>
                                </ul>
                            </div>
                            <div name="delivery" class="mr-1 ml-1 p-1" style="border:1px solid black;">
                                <strong>Delivery To:</strong>
                                <p class="m-0 p-0" t-field="doc.sales_lot_id.partner_shipping_id"
                                     t-options='{"widget": "contact", "fields": ["address", "name", "phone", "mobile", "email"], "no_marker": True, "phone_icons": True}'/>
                            </div>
                        </div>
                    </div>
                </div>

                <t t-set="current_label_index" t-value="current_label_index + 1"/>
                <div class="my-3" style="border-bottom: 1px solid black;"/>
            </t>
        </div>
    </template>

    <template id="report_mrp_saleslot_label">
        <t t-call="web.basic_layout">
            <t t-set="docs" t-value="docs.sudo()"/>
            <t t-foreach="docs" t-as="doc">
                <t t-call="mc_sales_lot.report_mrp_saleslot_labels_document" t-lang="doc.env.lang"/>
            </t>
        </t>
    </template>
</odoo>
